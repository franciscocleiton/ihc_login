<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="estilos/estilos.css">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
</head>
<body>
    <div class="login-box">
        <h2>Cadastro</h2>
        <form id="form">
            <div class="user-box" >
                <input type="text" name="" required="" class="inputs required" oninput="nameValidate()">
                <label>Nome</label>
                <span class="span-required">O nome deve conter no mínimo 3 caracteres</span>
            </div>
            <div class="user-box" >
                <input type="text" name="" required="" class="inputs required" oninput="emailValidate()">
                <label>Email</label>
                <span class="span-required">Digite um email válido</span>
            </div>
            <div class="user-box">
                <input type="password" id="password" name="" required="" class="inputs required" oninput="senhaValidate()">
                <label>Senha</label>
                <i id="togglePassword" class="fas fa-eye" onclick="eye()"></i>
                <span class="span-required">A senha deve conter no mínimo 8 dígitos</span>
            </div>
            <div class="user-box">
                <input type="password" id="password1" name="" required="" class="inputs required" oninput="passCompare()">
                <i id="togglePassword1" class="fas fa-eye" onclick="eye1()"></i>
                <label>Repita a Senha</label>
                <span class="span-required">As senhas devem ser iguais</span>
            </div>
            
            <a class="botao-cadastro" href="#" id="link" onclick="troca()">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                CADASTRO
            </a>
            <div class="login">
                <a href="form.html" >Login</a>
            </div>
        </form>
    </div>

    <script>
        const form = document.getElementById('form');
        const campos = document.querySelectorAll('.required');
        const spans = document.querySelectorAll('.span-required');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const togglePassword = document.querySelector("#togglePassword");
        const password = document.querySelector("#password");
        const togglePassword1 = document.querySelector("#togglePassword1");
        const password1 = document.querySelector("#password1");
        const link = document.querySelector("#link");


        function setError(index){
            campos[index].style.border = '1px solid #FF0043';
            spans[index].style.display = 'block'
        }

        function setRemove(index){
            campos[index].style.border = '';
            spans[index].style.display = 'none'
        }

        function nameValidate() {
            if(campos[0].value.length < 3) {
                setError(0);
            }
            else {
                setRemove(0);
            }
        }

        function emailValidate() {
            if(emailRegex.test(campos[1].value)) {
                setRemove(1);
            }
            else {
                setError(1);
            }
        }

        function senhaValidate() {
            if(campos[2].value.length < 8) {
                setError(2);
            }
            else {
                setRemove(2);
            }
        }

        function passCompare() {
            if(campos[2].value == campos[3].value) {
                setRemove(3);
            }
            else {
                setError(3);
            }
        }

        function eye() {
            const type = password.type === "password" ? "text" : "password";

            password.type = type;

            
            togglePassword.classList.toggle("fa-eye");
            togglePassword.classList.toggle("fa-eye-slash");
        };

        function eye1() {
            const type1 = password1.type === "password" ? "text" : "password";

            password1.type = type1;

            
            togglePassword1.classList.toggle("fa-eye");
            togglePassword1.classList.toggle("fa-eye-slash");
        };

        function troca() {
            link.innerHTML="Cadastrando...";
            link.style.left = '38px';
        }
    </script>
</body>
</html>