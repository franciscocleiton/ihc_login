<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="estilos/estilos.css">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
</head>
<body>
    <div class="login-box">
        <h2>Login</h2>
        <form id="form">
            <div class="user-box" >
                <input type="text" name="" required="" class="inputs required" oninput="emailValidate()">
                <label>Email</label>
                <span class="span-required">Digite um email válido</span>
            </div>
            <div class="user-box">
                <input type="password" id="password" name="" required="" class="inputs required" oninput="senhaValidate()">
                <label>Senha</label>
                <i id="togglePassword" class="fas fa-eye" onclick="eye()"></i>
                <span class="span-required" >A senha deve conter no mínimo 8 dígitos</span>
            </div>
            
            <a class="botao" href="#" id="link" onclick="troca()">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                LOGIN
            </a>
            <div class="cadastro">
                <a href="cadastro.html">Cadastre-se</a>
            </div>
        </form>
    </div>

    <script>
        const form = document.getElementById('form');
        const campos = document.querySelectorAll('.required');
        const spans = document.querySelectorAll('.span-required');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const togglePassword = document.querySelector("#togglePassword");
        const password = document.querySelector("#password");
        const link = document.querySelector("#link");

        function setError(index){
            campos[index].style.border = '1px solid #FF0043';
            spans[index].style.display = 'block'
        }

        function setRemove(index){
            campos[index].style.border = '';
            spans[index].style.display = 'none'
        }

        function emailValidate() {
            if(emailRegex.test(campos[0].value)) {
                setRemove(0);
            }
            else {
                setError(0);
            }
        }

        function senhaValidate() {
            if(campos[1].value.length < 8) {
                setError(1);
            }
            else {
                setRemove(1);
            }
        }

        function eye() {
            const type = password.type === "password" ? "text" : "password";

            password.type = type;

            
            togglePassword.classList.toggle("fa-eye");
            togglePassword.classList.toggle("fa-eye-slash");
        };

        function troca() {
            link.innerHTML="Entrando...";
            link.style.left = '55px';
        }
    </script>
</body>
</html>